<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>dahi's One - Admin Panel</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>dahi's One Admin Panel</h1>
            <p>dahiOS Tag Yönetim Sistemi</p>
        </header>

        <nav class="tabs">
            <button class="tab-btn active" data-tab="create">dahiOS Tag Oluştur</button>
            <button class="tab-btn" data-tab="list">Tag Listesi</button>
            <button class="tab-btn" data-tab="info">Tag Bilgisi</button>
            <button class="tab-btn" data-tab="stats">İstatistikler</button>
            <button class="tab-btn" data-tab="push">Push Bildirim</button>
        </nav>

        <!-- NFC Tag Oluştur -->
        <section id="create" class="tab-content active">
            <div class="card">
                <h2>Yeni dahiOS Tag Oluştur</h2>
                <form id="createForm">
                    <div class="form-group">
                        <label for="characterId">Karakter ID *</label>
                        <select id="characterId" required>
                            <option value="">Seçiniz...</option>
                            <option value="puls">Puls</option>
                            <option value="zest">Zest</option>
                            <option value="lumo">Lumo</option>
                            <option value="vigo">Vigo</option>
                            <option value="aura">Aura</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="redirectType">Yönlendirme Tipi *</label>
                        <select id="redirectType" required>
                            <option value="">Seçiniz...</option>
                            <option value="character">Karakter Sayfası</option>
                            <option value="store">Mağaza</option>
                            <option value="campaign">Kampanya</option>
                        </select>
                    </div>

                    <div class="form-group" id="customUrlGroup" style="display: none;">
                        <label for="customUrl">Özel URL *</label>
                        <input type="url" id="customUrl" placeholder="https://dahis.io/campaign">
                    </div>

                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="isActive" checked>
                            Aktif
                        </label>
                    </div>

                    <button type="submit" class="btn btn-primary">Tag Oluştur</button>
                </form>

                <div id="createResult" class="result"></div>
            </div>
        </section>

        <!-- Tag Listesi -->
        <section id="list" class="tab-content">
            <div class="card">
                <h2>dahiOS Tag Listesi</h2>
                <div class="filter-group">
                    <label for="filterCharacter">Karakter Filtrele:</label>
                    <select id="filterCharacter" onchange="loadTagList()">
                        <option value="">Tümü</option>
                        <option value="puls">Puls</option>
                        <option value="zest">Zest</option>
                        <option value="lumo">Lumo</option>
                        <option value="vigo">Vigo</option>
                        <option value="aura">Aura</option>
                    </select>
                    <button class="btn btn-secondary" onclick="loadTagList()">Yenile</button>
                </div>
                <div id="tagList" class="tag-list"></div>
            </div>
        </section>

        <!-- Tag Bilgisi -->
        <section id="info" class="tab-content">
            <div class="card">
                <h2>dahiOS Tag Bilgisi</h2>
                <form id="infoForm">
                    <div class="form-group">
                        <label for="infoNfcId">dahiOS Tag ID (UUID)</label>
                        <input type="text" id="infoNfcId" placeholder="550e8400-e29b-41d4-a716-446655440000" required>
                        <small style="display: block; margin-top: 5px; color: #666;">Eski nfcId formatı da desteklenir</small>
                    </div>
                    <button type="submit" class="btn btn-primary">Bilgi Getir</button>
                </form>
                <div id="infoResult" class="result"></div>
            </div>
        </section>

        <!-- İstatistikler -->
        <section id="stats" class="tab-content">
            <div class="card">
                <h2>dahiOS Okutma İstatistikleri</h2>
                <form id="statsForm">
                    <div class="form-group">
                        <label for="statsCharacterId">Karakter ID (Opsiyonel)</label>
                        <select id="statsCharacterId">
                            <option value="">Tümü</option>
                            <option value="puls">Puls</option>
                            <option value="zest">Zest</option>
                            <option value="lumo">Lumo</option>
                            <option value="vigo">Vigo</option>
                            <option value="aura">Aura</option>
                        </select>
                    </div>
                    <button type="submit" class="btn btn-primary">İstatistikleri Getir</button>
                </form>
                <div id="statsResult" class="result"></div>
            </div>
        </section>

        <!-- Push Bildirim -->
        <section id="push" class="tab-content">
            <div class="card">
                <h2>Push Bildirim Gönder</h2>
                <form id="pushForm">
                    <div class="form-group">
                        <label for="pushTitle">Başlık *</label>
                        <input type="text" id="pushTitle" placeholder="Bildirim başlığı" required maxlength="100">
                    </div>

                    <div class="form-group">
                        <label for="pushBody">Mesaj *</label>
                        <textarea id="pushBody" placeholder="Bildirim mesajı" required maxlength="500" rows="4"></textarea>
                    </div>

                    <div class="form-group">
                        <label>
                            <input type="radio" name="pushTarget" value="all" checked onchange="toggleUserIdsInput()">
                            Tüm Kullanıcılara Gönder
                        </label>
                        <label style="margin-top: 10px; display: block;">
                            <input type="checkbox" id="useTopic" checked>
                            Topic kullan (Daha hızlı - tüm kullanıcılara)
                        </label>
                        <label style="margin-top: 10px; display: block;">
                            <input type="radio" name="pushTarget" value="specific" onchange="toggleUserIdsInput()">
                            Belirli Kullanıcılara Gönder
                        </label>
                    </div>

                    <div class="form-group" id="userIdsGroup" style="display: none;">
                        <label for="pushUserIds">Kullanıcı ID'leri (Virgülle Ayırın)</label>
                        <input type="text" id="pushUserIds" placeholder="userId1, userId2, userId3">
                        <small style="display: block; margin-top: 5px; color: #666;">
                            Birden fazla kullanıcı ID'sini virgülle ayırarak girin
                        </small>
                    </div>

                    <div class="form-group">
                        <label for="pushData">Ek Veri (JSON - Opsiyonel)</label>
                        <textarea id="pushData" placeholder='{"route": "/character/puls", "key": "value"}' rows="3"></textarea>
                        <small style="display: block; margin-top: 5px; color: #666;">
                            Deep link veya ek veri için JSON formatında girin
                        </small>
                    </div>

                    <button type="submit" class="btn btn-primary" id="pushSubmitBtn">Bildirim Gönder</button>
                </form>
                <div id="pushResult" class="result"></div>
            </div>
        </section>
    </div>

    <!-- Edit Tag Modal -->
    <div id="editTagModal" class="modal" style="display: none;">
        <div class="modal-content" style="max-width: 500px;">
            <span class="modal-close" onclick="closeEditTagModal()">&times;</span>
            <h2>dahiOS Tag Düzenle</h2>
            <form id="editTagForm">
                <input type="hidden" id="editNfcId">
                
                <div class="form-group">
                    <label for="editCharacterId">Karakter ID *</label>
                    <select id="editCharacterId" required>
                        <option value="">Seçiniz...</option>
                        <option value="puls">Puls</option>
                        <option value="zest">Zest</option>
                        <option value="lumo">Lumo</option>
                        <option value="vigo">Vigo</option>
                        <option value="aura">Aura</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="editRedirectType">Yönlendirme Tipi *</label>
                    <select id="editRedirectType" required>
                        <option value="">Seçiniz...</option>
                        <option value="character">Karakter Sayfası</option>
                        <option value="store">Mağaza</option>
                        <option value="campaign">Kampanya</option>
                    </select>
                </div>

                <div class="form-group" id="editCustomUrlGroup" style="display: none;">
                    <label for="editCustomUrl">Özel URL *</label>
                    <input type="url" id="editCustomUrl" placeholder="https://dahis.io/campaign">
                </div>

                <div class="form-group">
                    <label>
                        <input type="checkbox" id="editIsActive">
                        Aktif
                    </label>
                </div>

                <div id="editTagResult" class="result"></div>

                <div style="display: flex; gap: 10px; margin-top: 20px;">
                    <button type="submit" class="btn btn-primary" style="flex: 1;">Kaydet</button>
                    <button type="button" class="btn btn-secondary" onclick="closeEditTagModal()" style="flex: 1;">İptal</button>
                </div>
            </form>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>

